> Описание для работы с тендерами


# Схема работы
**Получение тендеров через API REST для сайта navodki.ru**

Теперь вы можете:
* узнавать актуальные средние цены автомобилей разных марок и моделей; 
* следить за изменениями цен в кратко- и долгосрочном периодах;
* анализировать и прогнозировать изменения цен и спроса на автомобили;
* размещать полученную информацию на вашем сайте.`*`

```
* Наличие ссылки на сайт AUTO.RIA с гиперссылкой на страницу https://AUTO.RIA.com, 
не закрытой для индексации поисковыми системами, является единственным 
обязательным требованием для использования сервиса.
```


# REST API сайта NAVODKI.RU

API возвращает данные в формате JSON. Формат данных в большинстве случаев стандартный - коллекция объектов с полями *name* (название объекта) и *value* (его идентификатор).

Идентификатор любой сущности является целым числом.


### Управление списком

В системе установлен максимальный лимит на 10000. То есть дальше больше чем page=1000 указать невозможно


|  Параметр     | По умолчанию | Тип данных   | Описание   |
|:--------------|:--------------------------|:------------:|
|  limit        |  10           |  `int`      |   От 0 до 100   |
|  page         |  1            |  `int`      | номер страницы (максимальная страница 1000)
|  sortby       |  updatedon    |  `string`   | сортировка по полю (доступны поля: name,published, updatedon, start_date, end_date, max_price, a_price, c_price)
|  sortdir      |  DESC         |  `int`      | порядок сортировки


### Список поддерживаемых параметров

На данный момент поддерживаются следующие параметры:

|  Название           | Параметр в строке запроса | Тип данных   |
|:--------------------|:--------------------------|:------------:|
|  [id тендера](#tid)                                       |  tid                   | `int`       |
|  Ссылка                                                   |  uri                   |  `string`      |
|  Наименование                                             |  name                  |  `string`      |
|  Наименование (для 223 закона)                            |  subject               |  `string`      |
|  [Статус](#user-content-status)                           |  status                |  `int`      |
|  Наименование статуса                                     |  status_name           |  `string`      |
|  [Id закона](#user-content-platform_id)                   |  platform_id           |  `int`      |
|  Наименование закона             |  platform_name         |  `string`              |
|  [Дата публикации](#user-content-date)                    |  published             |  `date`      |
|  [Дата обновления](#user-content-date)                    |  updatedon             |  `date`      |
|  [Дата начала подачи заявок](#user-content-date)          |  start_date            |  `date`      |
|  [Дата окончания подачи заявок](#user-content-date)       |  end_date              |  `date`      |
|  [Начальная (максимальная) цена](#user-content-price)     |  max_price             |  `float`      |
|  [Обеспечение заявки](#user-content-price)                |  a_price               |  `float`      |
|  [Обеспечение контракта](#user-content-price)             |  c_price               |  `float`      |
|  [Заказчики](#user-content-customers)                     |  customers             |  `array`      |
|  [Отрасли](#user-content-categories)                      |  categories            |  `array`      |
|  [Регион](#user-content-regions)                          |  regions               |  `array`      |
|  [Площадка](#user-content-etp_id)                         |  etp_id                |  `int`      |
|  Наименование                                             |  etp_name              |  `string`      |
|  [Способ определения поставщика](#user-content-pw_id)     |  pw_id                 |  `int`      |
|  Наименование                     |  pw_name                      |  `string`      |
|  Наименование                     |  currency_name                |  `int`      |
|  Код валюты                       |  currency_code                |  `string`      |
|  Цифровая валюта                  |  currency_digitalCode         |  `int`      |
|  Метка о наличии документации     |  attach                       |  `boolean`      |

### Формат данных в запросе

```http://navodki.ru/api/tenders?tid=14448486&platform_id=1,3&categories=232,232&categories=232```



### Формат данных в ответе

В случае успешного подсчета средней цены по указанным параметрам результат будет со статусом **200 OK**.

Пример успешного ответа:
```javascript
{
    total: 17,
    results: {},
}
```

Расшифровка параметров:
- *total* - общее количество найденых результатов.
- *results* - массив данных

Если по каким-либо произошла ошибка, ответ будет иметь статус **400 Bad Request**, а тело ответа будет содержать следующее:

```javascript
{ "message": "Not Enough Data" }
```



## Методы для работы с типами транспорта и кузова


<a name="tid"></a>
### ID тендер

Выборка по id
```php
http://dev.navodki.ru/api/tenders?tid=14448486
```


<a name="status"></a>
### Статус

Выборка по статусу

```
http://dev.navodki.ru/api/tenders?status=2,3,4,6
```
  
Список значений: 

```javascript
[
    { 
      id: 2,
      name: "Работа комиссии",  
    },
    { 
      id: 3,
      name: "Закупка отменена",  
    },
    { 
      id: 4,
      name: "Закупка завершена",  
    },
    { 
      id: 6,
      name: "Идет прием заявок",  
    },
]
```

<a name="platform_id"></a>
### ID закона

Выборка тендеров по закону

```
http://dev.navodki.ru/api/tenders?platform_id=1,3
```
  
Список значений: 

```javascript
[
    { 
      id: 1,
      name: "44 закон",  
    },
    { 
      id: 3,
      name: "223 закон",  
    },
]
```


<a name="date"></a>
### Выборка дате для полей (published,updatedon,start_date,end_date)

Обе даты устанавливать обязательно

```
Формат ввода данных: "d-m-Y"
Минимальное значение: "01.01.2016"
Максимальноез значение: "текущая дата"

http://dev.navodki.ru/api/tenders?updatedon=07-02-2018,20-02-2018
```


<a name="price"></a>
### Выборка цене для полей (max_price,a_price,c_price)

Оба значения обязательны.

```
Разделитель: ","
Формат ввода данных: "int"
Минимальное значение: "0"
Максимальноез значение: "1000000000000000"

http://dev.navodki.ru/api/tenders?max_price=10000,10000000
```



<a name="customers"></a>
### Заказчики

У одной закупки может быть не ограниченое количество заказчиков.
Для выборки заказчиков используется **ИНН организации**

```
Разделитель: ","
Формат ввода данных: "number"
Допустимые значения: "10 или 12 цифр"

http://dev.navodki.ru/api/tenders?customers=7708697381
```


<a name="categories"></a>
### Отрасли


Выборка тендеров по отрасли закупки. Отрасль закупок прявязана к справочнику ОКПД2 с помощью кода каждому тендеру назначается отрасль

```
Разделитель: ","
Формат ввода данных: "int"

http://dev.navodki.ru/api/tenders?categories=244,380,245
```
  
Список значений: 

```
http://dev.navodki.ru/api/categories
```


<a name="regions"></a>
### Регион

Выборка данных по региону закупок заказчика.

```
Разделитель: ","
Формат ввода данных: "int"

http://dev.navodki.ru/api/tenders?regions=244,380,245
```
  
Список значений: 

```
http://dev.navodki.ru/api/regions
```


<a name="etp_id"></a>
### Площадка

Выборка данных по площадке размещения закупки.

```
Разделитель: ","
Формат ввода данных: "int"

http://dev.navodki.ru/api/tenders?etp=9,7,65,121,2,63,117
```
  
Список значений: 

```
http://dev.navodki.ru/api/etp
```

<a name="pw"></a>
### Способу определения поставщика

Выборка данных по способу определения поставщика

```
Разделитель: ","
Формат ввода данных: "int"

http://dev.navodki.ru/api/tenders?pw=212,3512
```
  
Список значений: 

```
http://dev.navodki.ru/api/pw
```
